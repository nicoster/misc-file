<script type="text/javascript" language="javascript" src="prototype.js" ></script>
<script language="javascript">
	var url = '';
	var el = external.menuArguments.event.srcElement;
	if (el.tagName == 'IMG')
		url = el.parentElement.href;
	if (el.tagName == 'A')
		url = el.href;

	url = 'http://localhost/';
	if (url != '') 
	{
		var myAjax = new Ajax.Request( 
						url, 
						{method: 'get', onComplete: onSink} 
						); 
	}
	function onSink(resp)
	{
//		alert(resp.responseText);
		var xml = resp.responseXML;
		var urls = xml.selectNodes('/root/FilmList/film');
		var index = 0;
		for (; index < urls.length; index ++)
		{
			var url = urls[index].attributes[0].value
//			alert(url);
			if (index + 1 == urls.length)
				external.menuArguments.location = url;
			else
				window.open(url,'_blank','status=no,resizable=no,width=150,height=20,left=150,top=130');
		}
	}
</script>